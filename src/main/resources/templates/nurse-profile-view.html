<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      th:replace="~{fragments/nurse-layout :: layout(~{::title}, ~{::content})}">
<head>
    <title>My Profile</title>
</head>
<body>
<div th:fragment="content">

    <!-- Page Header -->
    <header class="mb-10 text-center">
        <h1 class="text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl">
            My Profile
        </h1>
        <p class="mt-3 max-w-2xl mx-auto text-md text-gray-500">
            View and manage your personal information.
        </p>
    </header>

    <!-- Alert Messages -->
    <div class="max-w-3xl mx-auto mb-6">
        <div th:if="${successMessage}" x-data="{ show: true }" x-show="show" x-init="setTimeout(() => show = false, 5000)"
             class="success-message flex justify-between items-center animate-fade-in">
            <span th:text="${successMessage}"></span>
            <button @click="show = false" class="text-white">&times;</button>
        </div>
        <div th:if="${errorMessage}" x-data="{ show: true }" x-show="show" x-init="setTimeout(() => show = false, 5000)"
             class="error-message flex justify-between items-center animate-fade-in">
            <span th:text="${errorMessage}"></span>
            <button @click="show = false" class="text-white">&times;</button>
        </div>
    </div>

    <!-- Profile Card -->
    <div class="max-w-3xl mx-auto bg-white rounded-2xl shadow-lg overflow-hidden">
        <div class="px-8 py-6">
            <div class="flex items-center justify-between mb-6 pb-4 border-b border-gray-200">
                <div class="flex items-center">
                    <div class="w-16 h-16 bg-gradient-to-r from-nurse-teal to-teal-600 rounded-full flex items-center justify-center mr-5">
                        <span class="text-white text-3xl font-bold" th:if="${#authentication.principal != null and #authentication.principal.username != null and #authentication.principal.username.length() > 0}" th:text="${#strings.substring(#authentication.principal.username, 0, 1)}"></span>
                    </div>
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800" th:text="${user.name}">User Name</h2>
                        <p class="text-md text-gray-500" sec:authentication="principal.username">user.email@example.com</p>
                    </div>
                </div>
                <a th:href="@{/nurse/profile/edit}"
                   class="btn-gradient text-white font-bold py-2 px-5 rounded-lg shadow-md hover:shadow-lg transition-transform transform hover:-translate-y-1 flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L14.732 3.732z"></path></svg>
                    Edit Profile
                </a>
            </div>

            <!-- Profile Details -->
            <dl class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-6">
                <div class="bg-gray-50 p-4 rounded-lg">
                    <dt class="text-sm font-medium text-gray-500">NIC</dt>
                    <dd class="mt-1 text-md text-gray-900 font-semibold" th:text="${user.nic}">-</dd>
                </div>
                <div class="bg-gray-50 p-4 rounded-lg">
                    <dt class="text-sm font-medium text-gray-500">Phone Number</dt>
                    <dd class="mt-1 text-md text-gray-900 font-semibold" th:text="${user.phoneNumber}">-</dd>
                </div>
                <div class="bg-gray-50 p-4 rounded-lg">
                    <dt class="text-sm font-medium text-gray-500">Birthday</dt>
                    <dd class="mt-1 text-md text-gray-900 font-semibold" th:text="${user.birthday} != null ? ${#temporals.format(user.birthday, 'MMMM dd, yyyy')} : '-'">-</dd>
                </div>
                <div class="bg-gray-50 p-4 rounded-lg">
                    <dt class="text-sm font-medium text-gray-500">Postal Code</dt>
                    <dd class="mt-1 text-md text-gray-900 font-semibold" th:text="${user.postalCode}">-</dd>
                </div>
                <div class="md:col-span-2 bg-gray-50 p-4 rounded-lg">
                    <dt class="text-sm font-medium text-gray-500">Address</dt>
                    <dd class="mt-1 text-md text-gray-900 font-semibold" th:text="${user.address}">-</dd>
                </div>
            </dl>
        </div>
    </div>
</div>
</body>
</html>